services:
  chatbot:
    build: .
    container_name: school-chatbot
    restart: unless-stopped
    
    ports:
      - "5005:5000"
    
    environment:
      # âœ… ONLY MySQL URL - all other config loaded from MySQL!
      - MYSQL_URL=${MYSQL_URL}
      - MYSQL_URL=${MYSQL_URL}
      - ADMIN_USERNAME="admin"
      - ADMIN_PASSWORD="D1ndh1sk@;;

    
    volumes:
      - logs-data:/app/logs
      - models-data:/app/models
    
    extra_hosts:
      - "host.docker.internal:host-gateway"
    
    networks:
      - chatbot-net
    
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:5000/health"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 10s

networks:
  chatbot-net:
    driver: bridge

volumes:
  logs-data:
  models-data:
